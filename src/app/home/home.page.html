<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>
      {{ 'home.title' | translate }}
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-card class="welcome-card">
    <ion-card-header>
      <ion-card-subtitle color="medium">{{ 'home.get-started' | translate }}</ion-card-subtitle>
      <ion-card-title color="dark">{{ 'home.presentation' | translate }}</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <p>{{ 'home.description' | translate }}</p>
      <ion-button *ngIf="!gameCreated" color="light" size="default" expand="full" attr.aria-label="{{ 'home.new-game' | translate }}" (click)="newGame()">
        <ion-label>{{ 'home.new-game' | translate }}</ion-label>
      </ion-button>

      <ion-list *ngIf="gameCreated">
        <ion-item>
          <ion-label><a href="https://casual-chess.web.app/position/{{game.wid}}">{{ 'home.link-white-player' | translate }}</a></ion-label>
          <ion-icon color="medium" name="clipboard" style="cursor:pointer" (click)="copyWhiteLink()"></ion-icon>
        </ion-item>
        <ion-item>
          <ion-label><a href="https://casual-chess.web.app/position/{{game.bid}}">{{ 'home.link-black-player' | translate }}</a></ion-label>
          <ion-icon color="medium" name="clipboard" style="cursor:pointer" (click)="copyBlackLink()"></ion-icon>
        </ion-item>
        <ion-item>
          <ion-label><a href="https://casual-chess.web.app/position/{{game.vid}}">{{ 'home.link-viewer' | translate }}</a></ion-label>
          <ion-icon color="medium" name="clipboard" style="cursor:pointer" (click)="copyViewerLink()"></ion-icon>
        </ion-item>
      </ion-list>

      <ion-grid>
        <ion-row *ngFor="let g of games; trackBy: trackFunc">
          <ion-col><ion-label color="medium">{{g.timestamp.toDate() | date: 'dd/MM/yyyy hh:mm:ss'}}</ion-label></ion-col>
          <ion-col><img *ngNoCheck class="thumbnail" ngxLazy="/assets/pieces/{{configuration.pieceTheme}}/{{g.wpkey == playerKey ? 'w' : 'b'}}P.svg" /></ion-col>
          <ion-col *ngIf="g.gameover">{{g.wpkey == playerKey && g.turn == 'w' || g.bpkey == playerKey && g.turn == 'b' ? ('home.lost' | translate) : ('home.won' | translate)}}</ion-col>
          <ion-col *ngIf="!g.gameover">{{g.wpkey == playerKey && g.turn == 'w' || g.bpkey == playerKey && g.turn == 'b'? ('home.your-turn' | translate) : ('home.not-your-turn' | translate)}}</ion-col>
          <ion-col><a href="/position/{{g.wpkey == playerKey ? g.wid : g.bid}}"><ion-icon color="medium" slot="icon-only" name="{{ g.gameover ? 'eye' : 'play'}}"></ion-icon></a></ion-col>
          <ion-col><ion-icon color="medium" name="trash-outline" style="cursor:pointer" (click)="delete(g)"></ion-icon></ion-col>
        </ion-row>
      </ion-grid>
    </ion-card-content>
  </ion-card>
</ion-content>
